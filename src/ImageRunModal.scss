@import "global-variables";

// Ensure the width fits within the screen boundaries (with padding on the sides)
.pf-v6-c-select__menu {
    // 3xl is the left+right padding for an iPhone SE;
    // this works on other screen sizes as well
    max-inline-size: calc(100vw - var(--pf-v6-global--spacer--3xl));
}

// Make sure the footer is visible with more then 5 results.
.pf-c-select__menu-list {
    // 35% viewport height is for 1280x720;
    // since it picks the min of the two, it works everywhere
    max-block-size: min(20rem, 35vh);
    overflow: hidden scroll;
}

// Fix the dot next to spinner: https://github.com/patternfly/patternfly-react/issues/6383
.pf-v6-c-select__list-item.pf-m-loading {
    list-style-type: none;
}

.image-search-footer {
    flex-wrap: wrap;

    .pf-v6-c-toggle-group__text {
        word-wrap: break-word;
    }
}

 // PF4 does not yet support multiple form fields for the same label
.ct-input-group-spacer-sm.pf-v6-l-flex {
    // Limit width for select entries and inputs in the input groups otherwise they take up the whole space
    > .pf-v6-c-select, .pf-v6-c-form-control:not(.pf-v6-c-select__toggle-typeahead) {
      max-inline-size: 8ch;
    }
}

/* Ensure the internal grid leaves room for the delete button column */
.vncp-proxy-form .ct-list-row {
  display: grid;
  grid-template-columns: minmax(220px, 1fr) 140px min-content; /* last col for actions */
  align-items: start;
  column-gap: var(--pf-v6-global--spacer--md);
}

/* Make sure the action cell is placed in the last column and visible */
.vncp-proxy-form .ct-list-actions {
  justify-self: end;
  align-self: center;
}

/* The PF textarea lives inside the editor; target the real <textarea> */
.vncp-code-editor textarea.pf-v6-c-form-control.vncp-code-input {
  position: relative;
  background: transparent !important;
  border-color: transparent !important;

  /* Hide glyphs everywhere */
  color: transparent !important;
  -webkit-text-fill-color: transparent !important; /* Safari/Chrome */
  text-shadow: none !important;

  /* Keep the caret visible */
  caret-color: var(--pf-v6-global--Color--100) !important;

  /* Remove extra visuals that can “paint” text */
  box-shadow: none !important;
  outline: 0 !important;

  /* Prevent layout surprises; preview handles scroll */
  resize: none !important;
}


/* Hide placeholder and selected text (selection can re-paint) */
.vncp-code-editor textarea.pf-v6-c-form-control.vncp-code-input::placeholder {
  color: transparent !important;
  -webkit-text-fill-color: transparent !important;
}
.vncp-code-editor textarea.pf-v6-c-form-control.vncp-code-input::selection {
  background: transparent !important;
  color: transparent !important;
}

/* Autofill can force a text color on WebKit */
.vncp-code-editor textarea.pf-v6-c-form-control.vncp-code-input:-webkit-autofill {
  -webkit-text-fill-color: transparent !important;
  transition: background-color 9999s ease-out !important; /* hide yellow */
}

/* Windows High Contrast / forced-colors: tell UA not to remap colors */
@media (forced-colors: active) {
  .vncp-code-editor .vncp-code-preview {
    forced-color-adjust: none;
  }
  .vncp-code-editor textarea.pf-v6-c-form-control.vncp-code-input {
    forced-color-adjust: none;
    color: transparent !important;
    caret-color: CanvasText !important; /* keep caret visible */
  }
}





// HACK: A local copy of pf-m-horizontal (as ct-m-horizontal),
// but applied at the FormGroup level instead of Form
@media (min-width: $pf-v5-global--breakpoint--md) {
    .pf-v6-c-form__group.ct-m-horizontal {
        display: grid;
        grid-column-gap: var(--pf-v6-c-form--m-horizontal__group-label--md--GridColumnGap);
        grid-template-columns: var(--pf-v6-c-form--m-horizontal__group-label--md--GridColumnWidth) var(--pf-v6-c-form--m-horizontal__group-control--md--GridColumnWidth);
    }
}

/* Markdown polish (no deps, PF-friendly) */
.md-root {
  /* keep PF typography, just small tweaks */
}

.md-heading {
  position: relative;
  scroll-margin-top: 72px; /* nicer anchored scroll inside modal */
}

.md-anchor {
  text-decoration: none;
  opacity: 0.4;
  margin-right: .25rem;
  font-weight: 600;
}
.md-heading:hover .md-anchor { opacity: 1; }

.md-codeblock {
  position: relative;
  background: var(--pf-v6-global--BackgroundColor--200);
  border: 1px solid var(--pf-v6-global--BorderColor--100);
  border-radius: var(--pf-v6-global--BorderRadius--sm);
  overflow: hidden;
}
.md-codeblock pre {
  margin: 0;
  padding: var(--pf-v6-global--spacer--md);
  overflow: auto;
  max-height: 40vh;
}
.md-copy-btn {
  position: absolute;
  top: .25rem;
  right: .25rem;
  padding: .25rem .5rem;
  border: 1px solid var(--pf-v6-global--BorderColor--100);
  background: var(--pf-v6-global--BackgroundColor--100);
  border-radius: var(--pf-v6-global--BorderRadius--sm);
  font-size: .75rem;
  cursor: pointer;
}
.md-copy-btn:hover { background: var(--pf-v6-global--BackgroundColor--200); }

.md-img {
  max-width: 100%;
  height: auto;
}

.md-table-wrap { overflow-x: auto; }
.md-table {
  min-width: 320px;
  width: auto;
}
.md-table th, .md-table td { white-space: nowrap; }

.md-toc {
  padding: var(--pf-v6-global--spacer--md);
  border: 1px dashed var(--pf-v6-global--BorderColor--100);
  border-radius: var(--pf-v6-global--BorderRadius--sm);
  background: var(--pf-v6-global--BackgroundColor--100);
  margin-bottom: var(--pf-v6-global--spacer--md);
}
.md-toc__title { font-weight: 600; margin-bottom: .5rem; }
.md-toc ul { list-style: none; margin: 0; padding: 0; }
.md-toc li { margin: .125rem 0; }
.md-toc li.lv-2 { padding-left: .75rem; }
.md-toc li.lv-3 { padding-left: 1.5rem; }
